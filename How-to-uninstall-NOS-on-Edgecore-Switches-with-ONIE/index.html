<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>How to uninstall NOS on Edgecore Switches with ONIE | Engineer Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="ObjectiveThe post shows the procedure to uninstall Network OS and into ONIE environment
Setup
Power on the switch 
Connect to the switch via console port
Login to the switch

Steps with x86">
<meta property="og:type" content="article">
<meta property="og:title" content="How to uninstall NOS on Edgecore Switches with ONIE">
<meta property="og:url" content="http://edge-core.github.io/How-to-uninstall-NOS-on-Edgecore-Switches-with-ONIE/index.html">
<meta property="og:site_name" content="Engineer Blog">
<meta property="og:description" content="ObjectiveThe post shows the procedure to uninstall Network OS and into ONIE environment
Setup
Power on the switch 
Connect to the switch via console port
Login to the switch

Steps with x86">
<meta property="og:updated_time" content="2017-03-10T03:05:59.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="How to uninstall NOS on Edgecore Switches with ONIE">
<meta name="twitter:description" content="ObjectiveThe post shows the procedure to uninstall Network OS and into ONIE environment
Setup
Power on the switch 
Connect to the switch via console port
Login to the switch

Steps with x86">
  
    <link rel="alternate" href="/atom.xml" title="Engineer Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-92782610-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Engineer Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Freedom, Control, Innovation</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        <a id="nav-github-link" class="nav-icon" href="https://github.com/edge-core"></a>
        <a id="nav-linkedin-link" class="nav-icon" href="https://www.linkedin.com/company-beta/1692901"></a>
        <a id="nav-twitter-link" class="nav-icon" href="https://twitter.com/EdgeCoreNetwork"></a>
        <a id="nav-youtube-link" class="nav-icon" href="https://www.youtube.com/channel/UCPSKmi8_jbw_Y_7JVjxC8Rw"></a>
        <a id="nav-facebook-link" class="nav-icon" href="https://www.facebook.com/Edge-Core-Networks-137817126099"></a>
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://edge-core.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-How-to-uninstall-NOS-on-Edgecore-Switches-with-ONIE" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/How-to-uninstall-NOS-on-Edgecore-Switches-with-ONIE/" class="article-date">
  <time datetime="2017-03-10T03:05:59.000Z" itemprop="datePublished">2017-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      How to uninstall NOS on Edgecore Switches with ONIE
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Objective"><a href="#Objective" class="headerlink" title="Objective"></a>Objective</h2><p>The post shows the procedure to uninstall Network OS and into ONIE environment</p>
<h2 id="Setup"><a href="#Setup" class="headerlink" title="Setup"></a>Setup</h2><ol>
<li>Power on the switch </li>
<li>Connect to the switch via console port</li>
<li>Login to the switch</li>
</ol>
<h2 id="Steps-with-x86"><a href="#Steps-with-x86" class="headerlink" title="Steps with x86"></a>Steps with x86</h2><a id="more"></a>
<ol>
<li>Reboot Network OS</li>
<li><p>Look for the prompt on GRUB menu, and select <code>ONIE</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">                    GNU GRUB  version 2.02~beta2+e4a1fe391</div><div class="line"></div><div class="line">+----------------------------------------------------------------------------+</div><div class="line">| OpenSwitch Primary Image (as5712-ops-1.0.0-release+2017030612)             |</div><div class="line">| OpenSwitch Secondary Image (Version information not available)             |</div><div class="line">| OpenSwitch Development -- NFS root                                         |</div><div class="line">|*ONIE                                                                       |</div><div class="line">| DIAG: Accton Diagnostic                                                    |</div><div class="line">|                                                                            |</div><div class="line">|                                                                            |</div><div class="line">|                                                                            |</div><div class="line">|                                                                            |</div><div class="line">|                                                                            |</div><div class="line">|                                                                            |</div><div class="line">|                                                                            |</div><div class="line">+----------------------------------------------------------------------------+</div><div class="line"></div><div class="line">     Use the ^ and v keys to select which entry is highlighted.</div><div class="line">     Press enter to boot the selected OS, `e&apos; to edit the commands</div><div class="line">     before booting or `c&apos; for a command-line.</div></pre></td></tr></table></figure>
</li>
<li><p>Choose <code>Uninstall OS</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">                    GNU GRUB  version 2.02~beta2+e4a1fe391</div><div class="line"></div><div class="line">+----------------------------------------------------------------------------+</div><div class="line">| ONIE: Install OS                                                           |</div><div class="line">| ONIE: Rescue                                                               |</div><div class="line">|*ONIE: Uninstall OS                                                         |</div><div class="line">| ONIE: Update ONIE                                                          |</div><div class="line">| ONIE: Embed ONIE                                                           |</div><div class="line">| DIAG: Accton Diagnostic (as5712_54x)                                       |</div><div class="line">|                                                                            |</div><div class="line">|                                                                            |</div><div class="line">|                                                                            |</div><div class="line">|                                                                            |</div><div class="line">|                                                                            |</div><div class="line">|                                                                            |</div><div class="line">+----------------------------------------------------------------------------+</div><div class="line"></div><div class="line">     Use the ^ and v keys to select which entry is highlighted.</div><div class="line">     Press enter to boot the selected OS, `e&apos; to edit the commands</div><div class="line">     before booting or `c&apos; for a command-line.</div></pre></td></tr></table></figure>
</li>
<li><p>The uninstall procedure is long and takes 30 mins</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">Info: Mounting kernel filesystems... done.</div><div class="line">scsi 6:0:0:0: Direct-Access              USB DISK 2.0     PMAP PQ: 0 ANSI: 6</div><div class="line">sd 6:0:0:0: [sda] 15466496 512-byte logical blocks: (7.91 GB/7.37 GiB)</div><div class="line">sd 6:0:0:0: [sda] Write Protect is off</div><div class="line">sd 6:0:0:0: [sda] Write cache: disabled, read cache: enabled, doesn&apos;t support DPO or FUA</div><div class="line">sd 6:0:0:0: [sda] Attached SCSI disk</div><div class="line">Info: Mounting ONIE-BOOT on /mnt/onie-boot ...</div><div class="line">Info: Using eth0 MAC address: xx:xx:xx:xx:xx:xx</div><div class="line">Info: eth0:  Checking link... up.</div><div class="line">Info: Trying DHCPv4 on interface: eth0</div><div class="line">ONIE: OS Uninstall Mode ...</div><div class="line">random: nonblocking pool is initialized</div><div class="line">Warning: Unable to configure interface using DHCPv4: eth0</div><div class="line">ONIE: Using default IPv4 addr: eth0: 192.168.3.10/24</div><div class="line">ONIE: Using link-local IPv4 addr: eth0: 169.254.226.25/16</div><div class="line">Starting: dropbear ssh daemon... done.</div><div class="line">Starting: telnetd... done.</div><div class="line">discover: Uninstall mode detected.  Running uninstaller.</div><div class="line">Erasing internal mass storage device: /dev/sda4 (128MB)</div><div class="line">  Percent complete: 100%</div><div class="line">Erase complete.</div><div class="line">Deleting partition 4 from /dev/sda</div><div class="line">Erasing internal mass storage device: /dev/sda5 (1024MB)</div><div class="line">  Percent complete: 100%</div><div class="line">Erase complete.</div><div class="line">Deleting partition 5 from /dev/sda</div><div class="line">Erasing internal mass storage device: /dev/sda6 (2048MB)</div><div class="line">  Percent complete: 100%</div><div class="line">...(Skip)</div></pre></td></tr></table></figure>
</li>
<li><p>Edgecore switch will reboot once completed, and ONIE will be loaded.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">                    GNU GRUB  version 2.02~beta2+e4a1fe391</div><div class="line"></div><div class="line">+----------------------------------------------------------------------------+</div><div class="line">|*ONIE: Install OS                                                           |</div><div class="line">| ONIE: Rescue                                                               |</div><div class="line">| ONIE: Uninstall OS                                                         |</div><div class="line">| ONIE: Update ONIE                                                          |</div><div class="line">| ONIE: Embed ONIE                                                           |</div><div class="line">| DIAG: Accton Diagnostic (as5712_54x)                                       |</div><div class="line">|                                                                            |</div><div class="line">|                                                                            |</div><div class="line">|                                                                            |</div><div class="line">|                                                                            |</div><div class="line">|                                                                            |</div><div class="line">|                                                                            |</div><div class="line">+----------------------------------------------------------------------------+</div><div class="line"></div><div class="line">     Use the ^ and v keys to select which entry is highlighted.</div><div class="line">     Press enter to boot the selected OS, `e&apos; to edit the commands</div><div class="line">     before booting or `c&apos; for a command-line.</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="Steps-with-U-Boot"><a href="#Steps-with-U-Boot" class="headerlink" title="Steps with U-Boot"></a>Steps with U-Boot</h2><ol>
<li>Reboot Network OS</li>
<li><p><code>Press any key</code> when you see the following prompt:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Hit any key to stop autoboot:</div></pre></td></tr></table></figure>
</li>
<li><p>Type the command for uninstall NOS</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">LOADER=&gt; run onie_uninstall</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://github.com/opencomputeproject/onie/wiki/Design-Spec-x86-NOS-Interface#x86-nos-uninstall" target="_blank" rel="external">x86 NOS Uninstall - ONIE Wiki</a></li>
<li><a href="https://github.com/opencomputeproject/onie/wiki/Design-Spec-U-Boot-NOS-Interface#u-boot-platform-nos-uninstall" target="_blank" rel="external">u-boot NOS Uninstall - ONIE Wiki</a></li>
<li><a href="https://github.com/opencomputeproject/onie/wiki/Testing-Overview#nos-uninstallation" target="_blank" rel="external">NOS Uninstallation - ONIE Wiki</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://edge-core.github.io/How-to-uninstall-NOS-on-Edgecore-Switches-with-ONIE/" data-id="cj46mil3900083rq443x5bp44" class="article-share-link">Share</a>
      
        <a href="http://edge-core.github.io/How-to-uninstall-NOS-on-Edgecore-Switches-with-ONIE/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/how-to/">how-to</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/onie/">onie</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/uninstall/">uninstall</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/How-to-install-OF-DPA-in-Edgecore-Switches/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          How to install OF-DPA in Edgecore Switches
        
      </div>
    </a>
  
  
    <a href="/Deployment-Guide-OpenSwitch/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Deployment Guide - OpenSwitch</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/debug/">debug</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deployment/">deployment</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/how-to/">how-to</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/install/">install</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ofdpa/">ofdpa</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/onie/">onie</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/onl/">onl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/opx/">opx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/support/">support</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/uninstall/">uninstall</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/debug/" style="font-size: 10px;">debug</a> <a href="/tags/deployment/" style="font-size: 13.33px;">deployment</a> <a href="/tags/how-to/" style="font-size: 16.67px;">how-to</a> <a href="/tags/install/" style="font-size: 10px;">install</a> <a href="/tags/ofdpa/" style="font-size: 13.33px;">ofdpa</a> <a href="/tags/onie/" style="font-size: 20px;">onie</a> <a href="/tags/onl/" style="font-size: 20px;">onl</a> <a href="/tags/opx/" style="font-size: 10px;">opx</a> <a href="/tags/support/" style="font-size: 13.33px;">support</a> <a href="/tags/uninstall/" style="font-size: 10px;">uninstall</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/How-to-install-OF-DPA-in-Edgecore-Switches/">How to install OF-DPA in Edgecore Switches</a>
          </li>
        
          <li>
            <a href="/How-to-uninstall-NOS-on-Edgecore-Switches-with-ONIE/">How to uninstall NOS on Edgecore Switches with ONIE</a>
          </li>
        
          <li>
            <a href="/Deployment-Guide-OpenSwitch/">Deployment Guide - OpenSwitch</a>
          </li>
        
          <li>
            <a href="/How-to-enable-debugging-mode-on-OF-DPA/">How to enable debugging mode on OF-DPA</a>
          </li>
        
          <li>
            <a href="/Deployment-Guide-ONL/">Deployment Guide - Open Network Linux, ONL</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Edgecore Networks<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'edgecore-github';
  
  var disqus_url = 'http://edge-core.github.io/How-to-uninstall-NOS-on-Edgecore-Switches-with-ONIE/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>